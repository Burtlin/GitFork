$(document).ready(function(){var r,t,n,a,e,o,c,u;for(r=d3.scale.linear().domain([2,12]).range(["#090","#f00"]),t=function(){var t,o,c,u,i;for(t=0,c=(o=n).length;c>t;++t)u=o[t],i=Math.sqrt(Math.pow(u.y-200,2)+Math.pow(u.x-400,2)),110>i&&0!==i?(u.x+=1.1*(u.x-400)/i,u.y+=1.1*(u.y-200)/i):i>140&&0!==i&&(u.x-=1.1*(u.x-400)/i,u.y-=1.1*(u.y-200)/i);return e.attr({cx:function(r){return r.x},cy:function(r){return r.y},r:function(r){return r.r},fill:function(t){return r(t.r)}}),a.alpha(.01)},n=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30].map(function(r){return{idx:r,r:parseInt(10*Math.random())+2,vy:0,ay:.3}}),a=d3.layout.force().size([800,400]).charge(function(r){return 30*-r.r}).alpha(.01),a.nodes(n).on("tick",t).start(),e=d3.select("svg").selectAll("circle").data(n).enter().append("circle"),o=0,c=n.length;c>o;++o)u=n[o],u.x=u.px=400*Math.random()+200,u.y=u.py=300*Math.random()+50;return t(),a.stop(),window.reset=function(){var r,t,e,o,c=[];for(a.start(),r=0,e=(t=n).length;e>r;++r)o=t[r],o.x=o.px=400*Math.random()+200,c.push(o.y=o.py=300*Math.random()+50);return c}});