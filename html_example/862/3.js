$(document).ready(function(){var r,n,t,a,e,o,y,c,u;for(r=50,n=d3.scale.linear().domain([2,12]).range(["#090","#f00"]),t=function(){var r,t,y,c;for(r=0,y=(t=a).length;y>r;++r)c=t[r],c.vy+=c.ay,c.y2+=c.vy,c.y2+c.r>=300&&(c.y2=300-c.r,c.vy=-1*Math.abs(c.vy),c.y=c.y2),c.vy=.95*c.vy;return o.attr({cx:function(r){return r.x},cy:function(r){return r.y2},r:function(r){return r.r},fill:function(r){return n(r.r)}}),e.alpha(.01)},a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30].map(function(r){return{idx:r,r:parseInt(10*Math.random())+2,vy:0,ay:1.2,y2:300*Math.random()}}),e=d3.layout.force().size([800,400]).charge(function(n){return-n.r*r}).alpha(.01),e.nodes(a).on("tick",t).start(),o=d3.select("svg").selectAll("circle").data(a).enter().append("circle"),y=0,c=a.length;c>y;++y)u=a[y],u.x=u.px=400*Math.random()+200,u.y=u.py=300*Math.random()+50;return t(),e.stop(),window.reset=function(){var r,n,t,o,y=[];for(e.start(),r=0,t=(n=a).length;t>r;++r)o=n[r],o.x=o.px=400*Math.random()+200,y.push(o.y2=o.y=o.py=300*Math.random()+50);return y}});