$(document).ready(function(){return d3.csv("piracy.csv",function(e){var t,a,n,r,i,l,o,s;for(e=e.map(function(e){return{name:e.Country,data:parseInt(e["2013 Value"]),rate:parseInt(e["2013 Rate"])}}),e.sort(function(e,t){return t.data-e.data}),e=e.splice(0,20),t={},a=0,n=e.length;n>a;++a)r=e[a],t[r.name]=r.rate;for(l=[],a=0,n=e.length;n>a;++a)o=e[a],l.push(o.name);return i=l,s=e.map(function(e){return e.data}),console.log(s),new Highcharts.Chart({chart:{renderTo:$("#bar")[0],type:"bar",marginLeft:130},plotOptions:{bar:{dataLabels:{enabled:!0,formatter:function(){return t[this.key]+"%"}}}},title:{text:"Value of Pirated Software in Millions USD",align:"center",x:0},xAxis:{categories:i,labels:{enabled:!0}},credits:{enabled:!1},yAxis:{allowDecimals:!0,title:{text:"Value of Pirated Software in Millions USD"},min:0,max:12e3},legend:{enabled:!1},series:[{data:s}]})})});